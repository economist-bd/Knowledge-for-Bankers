<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Banking Guide</title>
    <meta property="og:title" content="আধুনিক ব্যাংকিং ও অর্থনীতি" />
<meta property="og:description" content="সীমিত ফিচারযুক্ত একটি পরীক্ষামূলক সংস্করণ, যা আপনি পূর্ণাঙ্গ সংস্করণ কেনার আগে তা বিনামূল্যে ব্যবহার করে দেখতে পারেনে।" />
<meta property="og:image" content="https://knowledge-for-bankers.vercel.app/banner.png" />
<meta property="og:url" content="https://knowledge-for-bankers.vercel.app/" />
<meta property="og:type" content="website" />
    <meta property="fb:app_id" content="1371883234209046" />

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="আধুনিক ব্যাংকিং ও অর্থনীত">
<meta name="twitter:description" content="আধুনিক ব্যাংকিং ও অর্থনীত">
<meta name="twitter:image" content="https://knowledge-for-bankers.vercel.app/banner.png">
    
    <link rel="manifest" href="manifest.json">
    
    <meta name="theme-color" content="#0056b3">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --primary: #0056b3; --bg: #f4f7f6; --text: #333; }
        body { font-family: sans-serif; margin: 0; padding: 0; background: var(--bg); color: var(--text); }
        
        /* Header */
        header { background: var(--primary); color: white; padding: 20px; text-align: center; }
        .app-title { margin: 0; font-size: 1.8rem; }
        .author-info { font-size: 0.9rem; opacity: 0.9; margin-top: 5px; }
        
        /* Navigation */
        nav { position: sticky; top: 0; background: white; display: flex; overflow-x: auto; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 100; }
        nav button { flex: 1; min-width: 100px; padding: 15px; border: none; background: none; font-weight: bold; cursor: pointer; border-bottom: 3px solid transparent; }
        nav button.active { color: var(--primary); border-bottom-color: var(--primary); }

        /* Container */
        .container { max-width: 800px; margin: 20px auto; padding: 0 15px; padding-bottom: 60px; }
        .section { display: none; animation: fadeIn 0.3s; }
        .section.active { display: block; }

        /* Cards */
        .card { background: white; padding: 15px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .card h3 { margin-top: 0; color: var(--primary); cursor: pointer; display: flex; justify-content: space-between; }
        
        /* Chapter Body */
        .chapter-body { display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; }
        .chapter-body.show { display: block; }
        
        /* Search */
        .search-box { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 5px; font-size: 1rem; box-sizing: border-box;}

        /* Email */
        .email-box { background: #f9f9f9; padding: 15px; border-left: 4px solid var(--primary); font-family: monospace; white-space: pre-wrap; margin-bottom: 15px; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <header>
        <h1 class="app-title" id="appTitle">Loading...</h1>
        <div class="author-info" id="authorInfo"></div>
    </header>

    <nav>
        <button onclick="switchTab('home')" class="active" id="btn-home">হোম</button>
        <button onclick="switchTab('chapters')" id="btn-chapters">অধ্যায়</button>
        <button onclick="switchTab('glossary')" id="btn-glossary">শব্দভাণ্ডার</button>
        <button onclick="switchTab('emails')" id="btn-emails">ইমেইল</button>
    </nav>

    <div class="container">
        <div id="home" class="section active">
            <div class="card" id="introCard">Loading content...</div>
            <div class="card" id="ethicsCard"></div>
        </div>

        <div id="chapters" class="section">
            <div id="chapterList"></div>
        </div>

        <div id="glossary" class="section">
            <input type="text" class="search-box" id="searchGlossary" placeholder="শব্দ খুঁজুন... (যেমন: NPL)" onkeyup="filterGlossary()">
            <div id="glossaryList"></div>
        </div>

        <div id="emails" class="section">
            <div id="emailList"></div>
        </div>
    </div>

    <script type="module">
        import bookContent from './content.js';

        // 1. Load Header & Intro
        document.getElementById('appTitle').innerText = bookContent.meta.bookTitle;
        document.getElementById('authorInfo').innerText = bookContent.meta.authorName;
        
        document.getElementById('introCard').innerHTML = `
            <h3>ভূমিকা</h3>
            <p><strong>উৎসর্গ:</strong> ${bookContent.intro.dedication}</p>
            <p>${bookContent.intro.preface}</p>
        `;

        // 2. Load Ethics
        const ethics = bookContent.ethics;
        document.getElementById('ethicsCard').innerHTML = `
            <h3>নীতিশাস্ত্র</h3>
            <ul>${ethics.principles.map(p => `<li>${p}</li>`).join('')}</ul>
        `;

        // 3. Load Chapters
        const chapContainer = document.getElementById('chapterList');
        bookContent.chapters.forEach(chap => {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerHTML = `
                <h3 onclick="toggleChapter(this)">${chap.title} <i class="fas fa-chevron-down"></i></h3>
                <div class="chapter-body">
                    <p>${chap.description}</p>
                    <hr>
                    ${chap.questions.map(q => `
                        <p><strong>প্র: ${q.q}</strong><br>উ: ${q.a}</p>
                    `).join('')}
                </div>
            `;
            chapContainer.appendChild(div);
        });

        // 4. Load Glossary
        const glosContainer = document.getElementById('glossaryList');
        bookContent.glossary.forEach(item => {
            const div = document.createElement('div');
            div.className = 'card glossary-item';
            div.innerHTML = `
                <h3 style="margin:0; color:#333">${item.term}</h3>
                <p style="margin:5px 0 0 0; color:#666">${item.definition}</p>
            `;
            glosContainer.appendChild(div);
        });

        // 5. Load Emails
        const emailContainer = document.getElementById('emailList');
        bookContent.emails.forEach(email => {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerHTML = `
                <h3>${email.subject}</h3>
                <div class="email-box">${email.body}</div>
            `;
            emailContainer.appendChild(div);
        });

        // Global Functions for UI
        window.switchTab = function(id) {
            document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-' + id).classList.add('active');
            window.scrollTo(0,0);
        }

        window.toggleChapter = function(el) {
            const body = el.nextElementSibling;
            body.classList.toggle('show');
            const icon = el.querySelector('i');
            icon.classList.toggle('fa-chevron-up');
            icon.classList.toggle('fa-chevron-down');
        }

        window.filterGlossary = function() {
            const val = document.getElementById('searchGlossary').value.toLowerCase();
            document.querySelectorAll('.glossary-item').forEach(item => {
                const text = item.innerText.toLowerCase();
                item.style.display = text.includes(val) ? 'block' : 'none';
            });
        }
    </script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('SW Registered', reg))
                    .catch(err => console.log('SW Failed', err));
            });
        }
    </script>
</body>
</html>
